
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

    <title>全城足球狂熱 |  今晚去邊睇波好？全港通宵餐廳、酒吧好去處、01世界盃社區直播</title>
    <meta name="author" content="香港01">
    <meta name="description" content="睇盡世界盃足球賽時間表，賽程表，積分榜、球員射手榜，助攻榜，仲有各國國家隊實力分析，即時比分及賽果等足球新聞報導。仲有唔同範疇世界盃資訊，如睇波好去處，球員週邊新聞，直播賽事的手機app攻略大全，同你緊貼世界盃大小事。">
    <meta name="publisher" content="HK01">

    <!--favicon-->
    <link rel="icon" type="image/x-icon" href="https://wc2018.hk01.com/assets/images/favicon/favicon-16x16.ico"/>

    <!--canonical-->
    <link rel="canonical" href="https://wc2018.hk01.com/landing">

    <!--twitter-->
    <meta name="twitter:description" content="睇盡世界盃足球賽時間表，賽程表，積分榜、球員射手榜，助攻榜，仲有各國國家隊實力分析，即時比分及賽果等足球新聞報導。仲有唔同範疇世界盃資訊，如睇波好去處，球員週邊新聞，直播賽事的手機app攻略大全，同你緊貼世界盃大小事。">
    <meta name="twitter:image:src" content="https://wc2018.hk01.com/assets/images/background/wc2018-og.jpg">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="全城足球狂熱 |  今晚去邊睇波好？全港通宵餐廳、酒吧好去處、01世界盃社區直播">
    <meta name="twitter:url" content="https://wc2018.hk01.com/landing">
    <meta name="twitter:site" content="@hk01wemedia">
    <meta name="twitter:creator" content="@hk01wemedia">
    <meta name="twitter:domain" content="hk01.com">

    <!--fb-->
    <meta property="article:author" content="https://business.facebook.com/hk01.sports/"/>
    <meta property="article:publisher" content="https://business.facebook.com/hk01.sports/"/>

    <!--fb-->
    <meta property="fb:app_id" content="1651866545051541"/>
    <meta property="fb:pages" content=""/>

    <!--og-->
    <meta property="og:description" content="睇盡世界盃足球賽時間表，賽程表，積分榜、球員射手榜，助攻榜，仲有各國國家隊實力分析，即時比分及賽果等足球新聞報導。仲有唔同範疇世界盃資訊，如睇波好去處，球員週邊新聞，直播賽事的手機app攻略大全，同你緊貼世界盃大小事。"/>
    <meta property="og:image" content="https://wc2018.hk01.com/assets/images/background/wc2018-og.jpg"/>
    <meta property="og:site_name" content="香港01"/>
    <meta property="og:title" content="全城足球狂熱 | 今晚去邊睇波好？全港通宵餐廳、酒吧好去處、01世界盃社區直播"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://wc2018.hk01.com/live-football-map"/>

    <script src="library/piwik.min.js"></script>
    <script src="https://www.googletagmanager.com/gtag/js"></script>
    <script src="src/trackerClient.js"></script>

     <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

     <!-- Font Awesome Free -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">


    <link rel="stylesheet" href="src/style.css" crossorigin="anonymous">
    <script type="text/javascript" src="src/districts.js"></script>
  </head>
  <body>
  <!-- Load Facebook SDK for JavaScript -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = 'https://connect.facebook.net/zh_HK/sdk.js';
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

    <div id="bigcontainer">
    <div id="header">
      <div class="input-group">
        <span class="input-group-addon"><i class="fas fa-search"></i></span>
        <input class="form-control border-0" id="pac-input" type="text" placeholder="搜尋餐廳">
      </div>

      <div class="row container-fluid" id="nav-bar">
        <div class="burger col-1">
          <div id="nav-icon">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <ul id="scrollmenu" class="col-11 screen-selector"></ul>
      </div>
    </div>
    
    <div id="myNav" class="overlay">
      <div class="overlay-content  container">
        <h4>全港餐廳、酒吧好去處、01社區直播</h4>
        <p>睇盡世界盃足球賽時間表，賽程表，積分榜、球員射手榜，助攻榜，仲有各國國家隊實力分析，即時比分及賽果等足球新聞報導。仲有唔同範疇世界盃資訊，如睇波好去處，球員週邊新聞，直播賽事的手機app攻略大全，同你緊貼世界盃大小事。</p>
        <dl class="row">
          <dt class="col-1"><img src="icon/event.png"  height="20" width="20" class="" alt=""></dt>
          <dd class="col">01睇波團</dd>
          <dt class="col-1"><img src="icon/marker.png"  height="20" width="20" class="" alt=""></dt>
          <dd class="col">餐廳／酒吧</dd>
        </dl>
        <div id="navmenu" class="screen-selector"></div>
        <div>資料提供：NOW</div>
        <div id="nav-share-button">
          <a class="facebook fb-share-button" data-href="https://wc2018.hk01.com/live-football-map" data-layout="button_count" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwc2018.hk01.com%2Flive-football-map&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore"><i class="fab fa-facebook"></i></a>
          <a class="whatsapp" href="https://api.whatsapp.com/send?text=全城足球狂熱 |  今晚去邊睇波好？全港通宵餐廳、酒吧好去處、01世界盃社區直播 | https://wc2018.hk01.com/live-football-map" target="_blank"><i class="fab fa-whatsapp"></i></a>
          <a class="twitter" href="https://twitter.com/intent/tweet/?text=%E5%85%A8%E5%9F%8E%E8%B6%B3%E7%90%83%E7%8B%82%E7%86%B1+%7C++%E4%BB%8A%E6%99%9A%E5%8E%BB%E9%82%8A%E7%9D%87%E6%B3%A2%E5%A5%BD%EF%BC%9F%E5%85%A8%E6%B8%AF%E9%80%9A%E5%AE%B5%E9%A4%90%E5%BB%B3%E3%80%81%E9%85%92%E5%90%A7%E5%A5%BD%E5%8E%BB%E8%99%95%E3%80%8101%E4%B8%96%E7%95%8C%E7%9B%83%E7%A4%BE%E5%8D%80%E7%9B%B4%E6%92%AD+%7C+https%3A%2F%2Fwc2018.hk01.com%2Flive-football-map" target="_blank"><i class="fab fa-twitter"></i></a>
          <a class="telegram" href="https://telegram.me/share/url?url=https://wc2018.hk01.com/live-football-map&text=全城足球狂熱 |  今晚去邊睇波好？全港通宵餐廳、酒吧好去處、01世界盃社區直播 | https://wc2018.hk01.com/live-football-map" target="_blank"><i class="fab fa-telegram"></i></a>
          <a class="copy" id="navCopyToClipboard" name="全城足球狂熱 |  今晚去邊睇波好？全港通宵餐廳、酒吧好去處、01世界盃社區直播 | https://wc2018.hk01.com/live-football-map" href="#" onclick="navCopyToClipboard()"><i class="far fa-copy"></i></a>
        </div>
      </div>
<!--     <div id="overlay-footer">
      <img src="https://wc2018.hk01.com/assets/images/icons/hk01.svg" class="" alt="">
      <div class = "copyright">香港01有限公司版權所有 © 2018</div>
    </div> -->
    </div>

    <div id="map"></div>
      <script>
        var current_district = "all";
        var isMobile = true;
        var temp_zoom;
        var temp_coord;

        var watchWidth = window.matchMedia("(max-width: 576px)");
        watchWidth.addListener(checkScreenWidth) // Attach listener function on state changes



        function addLoadEvent(func) {
          var oldonload = window.onload;
          if (typeof window.onload != 'function') {
            window.onload = func;
          } else {
            window.onload = function() {
              if (oldonload) {
                oldonload();
              }
              func();
            }
          }
        }


        addLoadEvent(function() {
          detectBrowser();
          checkScreenWidth(watchWidth);
          init_district();
          console.log("anchor: " + current_district);
          if (current_district != "all") setScope("anchor", current_district);
          populateHeader(district_data);
          populateNavOverlay(district_data);
          // navButtonListener();
          navShareBtnListener();
          initMap();


          // Pageview - Original Page View send to both Piwik and Google Analytics
          fire_custom_url(removehash(window.location.href)); 

          // Event - Calculate how many unique user had access the map
          fire_events("wcmap_landing", "view", {
            'start_location': current_district,
            'related_article': 163141,
            'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
            'ts': Date.now()
          });
        });


        // Look for .hamburger
        var hamburger = document.getElementById("nav-icon");
        // On click
        hamburger.addEventListener("click", function() {
          hamburger.classList.toggle("open");
          if (hamburger.classList.contains("open")) {
            var target_height = "auto";
            //(screen.height <= 400) ? target_height = "700px": target_height = "100%";
            // document.getElementById("myNav").style["min-height"] = "100%";
            document.getElementById("myNav").style.height = target_height; //auto
          }   
          else {
            // document.getElementById("myNav").style["min-height"] = "0%";
            document.getElementById("myNav").style.height = "0%";
          }
        });

        function checkScreenWidth(x) {
            if (x.matches) { // If media query matches
                isMobile = true;
            } else {
                isMobile = false;
            }
            console.log("is mobile:  "+ isMobile);
        }


        function findWithAttr(array, attr, value) {
          var pos = {"i": -1, "j": -1};
              for(var i = 0, n = array.length; i < n; i ++) {
                for (var j = 0 , k = array[i].anchors.length; j < k; j++) {
                  if(array[i].anchors[j][attr] === value) {
                    pos = {"i":i, "j": j};
                      return pos;
                    }
                  }
                }
              return pos;
          }

        function detectBrowser() {
          var useragent = navigator.userAgent;
          var mapdiv = document.getElementById("map");
          console.log("Screen width: " + screen.width);

          if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1 ) {
            mapdiv.style.width = '100%';
            mapdiv.style.height = '100%';
          } 
        }

        function populateHeader(jsonObj) {
          navbar = document.querySelector("#scrollmenu");
          var zones = jsonObj;
          for (var i = 0, n = zones.length; i < n; i++) { 
            var districts = zones[i].anchors;
            for (var j = 0; k = districts.length, j < k; j++) {
              var listItem = document.createElement('li');
              var ahref = document.createElement("a");
              ahref.textContent = districts[j].display_name;
              ahref.setAttribute("href", "#"+districts[j].anchor);
              ahref.setAttribute("name", districts[j]["btn-id"]);
              ahref.classList.toggle("wcmap_menu");
              navbar.appendChild(listItem);
              listItem.appendChild(ahref);
              if (current_district == districts[j]["anchor"]) listItem.classList.toggle("active");
            }
          }
        }

        function populateNavOverlay(jsonObj) {
          var navbar = document.querySelector("#navmenu");
          var zones = jsonObj;
          var no_of_row = 3;
          for (var i = 0, n = zones.length; i < n; i++) { 
            var zone_header = document.createElement('h5');
            zone_header.textContent = zones[i].district;
            navbar.appendChild(zone_header);
            var districts = zones[i].anchors;

            for (var j = 0; k = districts.length/3, j < k; j++) {
              console.log(districts.length/3);
              var rowItem = document.createElement('div');
              rowItem.classList.toggle("row");
              navbar.appendChild(rowItem);
              for (var l = 0; l < 3; l++) {
                var colItem = document.createElement('div');
                colItem.classList.toggle("col");
                var ahref = document.createElement("a");
                rowItem.appendChild(colItem);
                if (j*3+l < districts.length) {
                  ahref.textContent = districts[j*3+l].display_name;
                  ahref.setAttribute("href", "#"+districts[j*3+l].anchor);
                  ahref.setAttribute("name", districts[j*3+l]["btn-id"]);
                  ahref.setAttribute("role", "button");
                  ahref.classList.toggle("btn");
                  ahref.classList.toggle("btn-block");
                  ahref.classList.toggle("btn-outline-light");
                  ahref.classList.toggle("wcmap_menu");
                  colItem.appendChild(ahref);
                  if (current_district == districts[j*3+l]["anchor"]) ahref.classList.toggle("active");
                }                
              }
            }
          }
         }

        // function navButtonListener() {
          // var nav_btns = document.querySelectorAll(".wcmap_menu");
          // for (var i=0; i<nav_btns.length; i++) {
          //   nav_btns[i].addEventListener("click", function (event) {
          //     // Event - User click the location on menu bar
          //     fire_events("wcmap_menu", "click", {
          //       'location': current_district,
          //       'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
          //       'ts': Date.now()
          //     });

          //     // Pageview - Send the PV with modified link and dimension
          //     fire_custom_url(removehash(window.location.href));
          //   });
          // }
        // }

        function navShareBtnListener() {
          var nav_share_btns = document.querySelectorAll("#nav-share-button a");
          for (var i=0; i<nav_share_btns.length; i++) {
            nav_share_btns[i].addEventListener("click", function (event) {
              // Event - User click the share button of the page
              fire_events("wcmap_share", "share", {
                'share_channel': this.className,
                'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
                'ts': Date.now()
              });
            });
          }
        }

        function mkrShareBtnListener(cat, name, lat, lng) {
          var share_btns = document.querySelectorAll("#share-button a");
          for (var i=0; i<share_btns.length; i++) {
            share_btns[i].addEventListener("click", function (event) {
              var temp_label = {};
              if (cat == "wcmap_rest_marker") {
                  temp_label = {
                  'share_channel': this.className,
                  'rest_name': name,
                  'rest_lat': lat,
                  'rest_lon': lng,
                  'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
                  'ts': Date.now()
                }
              } else if (cat == "wcmap_event_marker") {
                temp_label = {
                  'share_channel': this.className,
                  'event_name': name,
                  'event_lat': lat,
                  'event_lon': lng,
                  'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
                  'ts': Date.now()
                }
              }

              // Event - User click the share button on events
              fire_events(cat, "share", temp_label);
            });
          }
        }

        

        function copyBtnListener() {
          var copy_btn = document.getElementById("copyToClipboard");
          copy_btn.addEventListener("click", function () {
          console.log(this.getAttribute("name"));
            const el = document.createElement('textarea');
            el.value = this.getAttribute("name");
            el.setAttribute('readonly', '');
            el.style.position = 'absolute';
            el.style.left = '-9999px';
            document.body.appendChild(el);
            el.select();
            document.execCommand("copy");
            alert("你已複製: " + el.value);
            document.body.removeChild(el);
          });
        }

        // Set Entry District 
        function init_district() {
          var linkText = window.location.href;
          console.log("url: "+linkText);
          if (linkText.match(/#/)) current_district = linkText.match(/#(.*)/)[1];
        }

        // Create Google Map
        function initMap() {
          var hk = {lat: 22.319283, lng: 114.169340}; // {lat: 22.3750568, lng: 114.1050191};
          var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 12, 
            minZoom: 10,
            center: hk,
            mapTypeControl: false,
            streetViewControl: false,
            clickableIcons: false,
            gestureHandling: "greedy",
            fullscreenControlOptions : {
              position: google.maps.ControlPosition.RIGHT_BOTTOM
            },
            styles: [
  {
    "featureType": "poi",
    "elementType": "labels.text",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "poi.business",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "transit",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  }
]



          });

          // Onload
          if (current_district != "all") {
            map.panTo(temp_coord);
            map.setZoom(temp_zoom);
          } else
          {
            // Try HTML5 geolocation.
            if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(function(position) {
                var pos = {
                  lat: position.coords.latitude,
                  lng: position.coords.longitude
                };
                map.setCenter(pos);
                console.log("GPS Located");
              }, function() {
              });
            } else {
              // Browser doesn't support Geolocation
              console.log("Browser doesn't support Geolocation");
            }
          }

          var restLayer = new google.maps.Data();
          var eventLayer = new google.maps.Data();

          // Load GeoJSON.
          restLayer.loadGeoJson('src/restaurant.js', null, function(features) {
              // group items / cluster
          restInfowindow = new google.maps.InfoWindow();  // make it global
          var markers = features.map(function(feature) {
              var g = feature.getGeometry();

              var marker = new google.maps.Marker({
                  'position': g.get(0),
                  'data' : feature,
                  'icon' : 'markerclusterer/m1.png'
              });
              google.maps.event.addListener(marker, 'click', function(evt) {
                eventInfowindow.close(); // Close all windows;

                var info_name = this.data.f.name;
                var info_address = this.data.f.address;
                var info_phone = this.data.f.phone;
                var info_reservation = this.data.f.reservation;
                var info_min_charge = this.data.f.min_charge;
                var info_special_event = this.data.f.special_event;

                var marker_lat = evt.latLng.lat();
                var marker_lng = evt.latLng.lng();

                var share_info = info_name + ' | ' + info_address;
                console.log(share_info);
                window.history.pushState("object or string", "Title", "#"+share_info);
                // url remove # myTracker.pageView

                var content = "<div id='iw-container'>"+
                "<h6>"+info_name+"</h6>"+
                  "<div class='info-content'>"+
                    "<dl class='row'>"+
                      "<dt class='col-1'><i class='fas fa-map-marker-alt'></i></dt><dd class='col-11'>"+info_address+"</dd>"+
                      "<dt class='col-1'><i class='fas fa-phone'></i></dt><dd class='col-11'>"+info_phone+"</dd>"+
                //       "<dt class='col-1'><i class='far fa-clock'></i></dt><dd class='col-11'>"
                // if (info_opening_hour) content += info_opening_hour;
                // else content += "未有提供營業時間";
                //    content += "</dd>"+
                //       "<dt class='col-1'><i class='fas fa-calendar-alt'></i></dt><dd class='col-11'>播放場次："
                // if (info_play_schedule) content += info_play_schedule;
                // else content += "未有提供";
                   // content += "</dd>"+
                      "<dt class='col-1'><i class='fas fa-phone-volume'></i></dt><dd class='col-11'>訂位："
                if (info_reservation) content += info_reservation;
                else content += "不用";
                   content += "</dd>"+
                      "<dt class='col-1'><i class='fas fa-dollar-sign'></i></dt><dd class='col-11'>最低消費："
                if (info_min_charge) content += info_min_charge;
                else content += "沒有";
                  content += "</dd></dl>"
                if (info_special_event) content += info_special_event;
                  content += "</div><div id='share-button'>";

                  content +=
                    "<a class='whatsapp' href='https://api.whatsapp.com/send?text="+encodeURI(share_info)+"' target='_blank'>"+"<i class='fab fa-whatsapp'></i></a>"+
                    "<a class='twitter'  href='https://twitter.com/intent/tweet/?text="+encodeURI(share_info)+"' target='_blank'>"+"<i class='fab fa-twitter'></i></a>"+
                    "<a class='telegram'  href='https://telegram.me/share/url?url=https://wc2018.hk01.com/live-football-map&text="+encodeURI(share_info)+"' target='_blank'>"+"<i class='fab fa-telegram'></i></a>"+
                    "<a class='copy' id='copyToClipboard' name = '"+ share_info +"' href='#'><i class='far fa-copy'></i></a>"+
                  "</div>"+
                "</div>"

                restInfowindow.setContent(content);
                restInfowindow.open(map, marker);

                // Pageview - Send the PV with modified link and dimension
                fire_custom_url(removehash(window.location.href)); 

                // Event - User click the restaurant icon and see their detail
                fire_events("wcmap_rest_marker", "click", {
                  'rest_name': share_info,
                  'rest_lat': marker_lat,
                  'rest_lon': marker_lng,
                  'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
                  'ts': Date.now()
                });

                // Event - User click the share button on restaurant
                mkrShareBtnListener("wcmap_rest_marker", share_info, marker_lat, marker_lng);

                copyBtnListener();

              })
              return marker;
          });


          // create a new marker cluster
          var markerCluster = new MarkerClusterer(map, markers, {
                  imagePath: 'markerclusterer/m',
                  gridSize: 15,
                  maxZoom: 14,
                  zoomOnClick: true,
                  minimumClusterSize: 5
              });
          });

          restLayer.setStyle(function (feature) {
              return { icon: feature.getProperty('icon'), visible: false };
          });


          eventLayer.loadGeoJson('src/event.js', null, function(features) {});
          eventLayer.setMap(map);


          // global infowindow
          var eventInfowindow = new google.maps.InfoWindow();

          // When the user clicks, open an infowindow
          eventLayer.addListener('click', function(evt) {
              var info_match = evt.feature.getProperty("match");
              var info_date = evt.feature.getProperty("date");
              var info_weekday = evt.feature.getProperty("weekday");
              var info_time = evt.feature.getProperty("time");
              var info_address = evt.feature.getProperty("address");
              var info_partner = evt.feature.getProperty("partner");

              var event_lat = evt.latLng.lat();
              var event_lng = evt.latLng.lng();

              var share_info = info_match + " | " + info_date + "(" + info_weekday + ") " + info_time;

              window.history.pushState("object or string", "Title", "#"+share_info);
              // url remove # myTracker.pageView
              restInfowindow.close();

              var content = "<div id='iw-container'>"+
              "<h6>"+info_match+"</h6>" +
              "<div class='info-content'>"+
                "<p>香港01特設「01睇波團」，多啲人睇熱鬧啲，遍地睇波，齊歡暢，約埋三五知己一齊睇波！</p>"+
                    "<dl class='row'>"+
                      "<dt class='col-1'><i class='far fa-clock'></i></dt><dd class='col-11'>"+info_date + "(" + info_weekday + ") " + info_time+"</dd>"+
                      "<dt class='col-1'><i class='fas fa-map-marker-alt'></i></dt><dd class='col-11'>"+info_address+"</dd>"+
                      "<dt class='col-1'><i class='fas fa-hands-helping'></i></dt><dd class='col-11'>合作伙伴："+info_partner+"</dd></dl>";

              content += "</div><a href='#' role='button' class='register btn btn-block btn-primary'>報名</a><div id='share-button'>";

                  content +=
                    "<a class='whatsapp' href='https://api.whatsapp.com/send?text="+encodeURI(share_info)+"' target='_blank'>"+"<i class='fab fa-whatsapp'></i></a>"+
                    "<a class='twitter'  href='https://twitter.com/intent/tweet/?text="+encodeURI(share_info)+"' target='_blank'>"+"<i class='fab fa-twitter'></i></a>"+
                    "<a class='telegram'  href='https://telegram.me/share/url?url=https://wc2018.hk01.com/live-football-map&text="+encodeURI(share_info)+"' target='_blank'>"+"<i class='fab fa-telegram'></i></a>"+
                    "<a class='copy' id='copyToClipboard' name = '"+ share_info +"' href='#'><i class='far fa-copy'></i></a>"+
                  "</div>"+
                "</div>"

              eventInfowindow.setContent(content);
              eventInfowindow.setPosition(evt.feature.getGeometry().get());
              eventInfowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
              eventInfowindow.open(map);

              copyBtnListener();

              // Pageview - Send the PV with modified link and dimension
              fire_custom_url(removehash(window.location.href)); 

              // Event - User click the restaurant icon and see their detail
              fire_events("wcmap_event_marker", "click", {
                'event_name': share_info,
                'event_lat': event_lat,
                'event_lon': event_lng,
                'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
                'ts': Date.now()
              });


              // Event - 
              mkrShareBtnListener("wcmap_event_marker", share_info, event_lat, event_lng);


              // Event - User click the to register the event
              var reg_button = document.querySelector("a.register");
              reg_button.addEventListener("click", function (event) {
                fire_events("wcmap_event_reg", "click", {
                  'event_name': share_info,
                  'event_lat': event_lat,
                  'event_lon': event_lng,
                  'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
                  'ts': Date.now()
                });
              })

          });  

          eventLayer.setStyle({
            icon: 'icon/event.png'
          });

          // Set Bound
          var bounds = new google.maps.LatLngBounds(
            new google.maps.LatLng(22.152842, 113.831202),
            new google.maps.LatLng(22.644851, 114.455809)
            );

          var lastValidCenter = map.getCenter();

          map.addListener('center_changed', function() {
              if (!bounds.contains(map.getCenter())) {
                  map.panToBounds(bounds);
              }
          });

        // This example adds a search box to a map, using the Google Place Autocomplete
        // feature. People can enter geographical searches. The search box will return a
        // pick list containing a mix of places and predicted search terms.

        // This example requires the Places library. Include the libraries=places
        // parameter when you first load the API. For example:
        // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">

          // Create the search box and link it to the UI element.
          var input = document.getElementById('pac-input');
          var searchBox = new google.maps.places.SearchBox(input, {bounds: bounds});

          var markers = [];


          // Listen for the event fired when the user selects a prediction and retrieve
          // more details for that place.
          searchBox.addListener('places_changed', function() {

            //console.log(this.gm_bindings_.bounds[69].jd.formattedPrediction);
            var places = searchBox.getPlaces();
            var user_input = document.getElementById('pac-input').value;

            console.log(places);     
            console.log("length:" + places.length);
            console.log("user_input: " + user_input);

            // Event - Calculate how many unique user had access the map
            fire_events("wcmap_search", "search", {
              'keyword': user_input,
              'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
              'ts': Date.now()
            });

            // Clear out the old markers.
            markers.forEach(function(marker) {
              marker.setMap(null);
              console.log("Clear out the old markers");
            });
            markers = [];

            var bounds = new google.maps.LatLngBounds();
            // For each place, get the icon, name and location.
            places.forEach(function(place) {
              if (!place.geometry) {
                console.log("Returned place contains no geometry");
                return;
              }
              var icon = {
                url: place.icon,
                size: new google.maps.Size(71, 71),
                origin: new google.maps.Point(0, 0),
                anchor: new google.maps.Point(17, 34),
                scaledSize: new google.maps.Size(25, 25)
              };

              // Create a marker for each place.
              markers.push(new google.maps.Marker({
                map: map,
                icon: icon,
                title: place.name,
                position: place.geometry.location
              }));

              if (place.geometry.viewport) {
                // Only geocodes have viewport.
                bounds.union(place.geometry.viewport);
              } else {
                bounds.extend(place.geometry.location);
              }
            });
            map.fitBounds(bounds);
          });

        
          // Create the search box and link it to the UI element.
          var poi_choice = document.querySelectorAll('.screen-selector');
          for (var i=0; i<poi_choice.length; i++) {
            poi_choice[i].addEventListener("click", function (event) {
              if (event.target !== event.currentTarget) {
                  setScope("btn-id", event.target.name);

                  // Button style
                  var pre_active = document.querySelectorAll(".active");
                  if (pre_active) {
                    for (var i = 0, n = pre_active.length; i < n; i++)
                      pre_active[i].classList.toggle("active");
                  }

                  // Change active state for nav menu 
                  var target_btn = document.querySelector("#scrollmenu a[name=" + event.target.name + "]");
                    target_btn.parentNode.classList.toggle("active");
                  // Change active state for nav overlay
                  target_btn = document.querySelector("#navmenu a[name=" + event.target.name + "]");
                    target_btn.classList.toggle("active"); 

//////////////////////////////////

              // Event - User click the location on menu bar
              fire_events("wcmap_menu", "click", {
                'location': current_district,
                'anonymous_id': (document.cookie.match(/hk01_annonymous_id/)) ? document.cookie.match(/hk01_annonymous_id=(.*?);/)[1] : "",
                'ts': Date.now()
              });

              // Pageview - Send the PV with modified link and dimension
              setTimeout(function(){
                fire_custom_url(removehash(window.location.href));
              }, 5);


                  map.panTo(temp_coord);
                  map.setZoom(temp_zoom);

                  if (hamburger.classList.contains("open")){
                      hamburger.classList.toggle("open");
                      document.getElementById("myNav").style.height = "0%";
                  } 
              }
              event.stopPropagation();
          }, false);
          }         
        }

        function setScope(key, district) {
          var pos = findWithAttr(district_data, key, district);
          console.log(pos);
          if (pos.i > -1 && pos.j > -1) {
            current_district = district_data[pos.i].anchors[pos.j]['anchor'];
            temp_coord = {
                lat: (isMobile) ? district_data[pos.i].anchors[pos.j]['mlat'] : district_data[pos.i].anchors[pos.j]['lat'],
                lng: (isMobile) ? district_data[pos.i].anchors[pos.j]['mlng'] : district_data[pos.i].anchors[pos.j]['lng']
                }            
            temp_zoom = (isMobile) ? district_data[pos.i].anchors[pos.j]['mzoom'] : district_data[pos.i].anchors[pos.j]['zoom'];
            temp_zoom = (temp_zoom != "") ? temp_zoom : 17;
            console.log(current_district + " | " + temp_coord.lat + "," + temp_coord.lng + " | " + temp_zoom);
          } else {
            console.log("Wrong anchor, redirect to all");
            current_district = "all";
          }
        }

        

        function navCopyToClipboard() {
          const el = document.createElement('textarea');
          el.value = document.getElementById("navCopyToClipboard").getAttribute("name");
          el.setAttribute('readonly', '');
          el.style.position = 'absolute';
          el.style.left = '-9999px';
          document.body.appendChild(el);
          el.select();
          document.execCommand("copy");
          alert("你已複製: " + el.value);
          document.body.removeChild(el);
        }

        function removehash(string) {
          return string.replace("#", "/");
        }

      </script>
      <script src="src/fireEvent.js"></script>
      <script src="src/markerclusterer.js"></script>
      <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDY8m0DgOQR3CsKGxULgswQMNSN9RRyKpo&language=zh-TW&region=HK&libraries=places"></script>
<!--       <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDY8m0DgOQR3CsKGxULgswQMNSN9RRyKpo&callback=init&language=zh-TW&region=HK&libraries=places"></script> -->
      <!-- AIzaSyA_O-4Lg8mgL-w9LlI2v7LHQHYEulde3Oc -->
    </div>
  </body>
</html>